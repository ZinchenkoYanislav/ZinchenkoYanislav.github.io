<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="matrix.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    
<table class="table" id="mytab">
    <h1>матрица</h1>
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">1</th>
      <th scope="col">2</th>
      <th scope="col">3</th>
      <th scope="col">сумма</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">1</th>
      <td> 
        <div class="colGroup1 rowGroup1">1</div>  
        <div class="rowGroup1_none">
            17%
            <progress max="100" value="17"></progress>
        </div>
      </td>
      <td>
          <div class="colGroup2 rowGroup1">2</div>
          <div class="rowGroup1_none">
            33%
            <progress max="100" value="33"></progress>
        </div>
      </td>
      <td>
        <div class="colGroup3 rowGroup1">3</div> 
        <div class="rowGroup1_none">
            50%
            <progress max="100" value="50"></progress>
        </div>
        </td>
      <td id="sum1"></td>
    </tr>
    <tr>
      <th scope="row">2</th>
      <td>
        <div class="colGroup1 rowGroup2">2</div>  
        <div class="rowGroup2_none">
            22%
            <progress max="100" value="22"></progress>
        </div>
        </td>
      <td>
        <div class="colGroup2 rowGroup2">3</div>  
        <div class="rowGroup2_none">
            33%
            <progress max="100" value="33"></progress>
        </div>
        </td>
      <td>
        <div class="colGroup3 rowGroup2">4</div>
        <div class="rowGroup2_none">
            44%
            <progress max="100" value="44"></progress>
        </div>
        </td>
      <td id="sum2"></td>
    </tr>
    <tr>
      <th scope="row">3</th>
      <td>
        <div class="colGroup1 rowGroup3">3</div>
        <div class="rowGroup3_none">
            21%
            <progress max="100" value="21"></progress>
        </div>
        </td>
      <td>
        <div class="colGroup2 rowGroup3">5</div> 
        <div class="rowGroup3_none">
            36%
            <progress max="100" value="36"></progress>
        </div>
        </td>
      <td>
        <div class="colGroup3 rowGroup3">6</div>  
        <div class="rowGroup3_none">
            43%
            <progress max="100" value="43"></progress>
        </div>
        </td>
      <td id="sum3"></td>
    </tr>
    <tr>
        <th scope="row">4</th>
        <td>
        <div class="colGroup1 rowGroup4">4</div> 
        <div class="rowGroup4_none">
            24%
            <progress max="100" value="24"></progress>
        </div>   
        </td>
        <td>
            <div class="colGroup2 rowGroup4">6</div>
            <div class="rowGroup4_none">
                35%
                <progress max="100" value="35"></progress>
            </div>       
        </td>
        <td>
            <div class="colGroup3 rowGroup4">7</div>
            <div class="rowGroup4_none">
                41%
                <progress max="100" value="41"></progress>
            </div>       
        </td>
        <td id="sum4"></td>
      </tr>
    <tr>
        <th scope="row">среднее</th>
        <td id='avarageGroup1'></td>
        <td id='avarageGroup2'></td>
        <td id='avarageGroup3'></td>
        <td></td>
      </tr>
  </tbody>
</table>

<script>
    let table = document.getElementById("mytab");
    let colGroup1 = document.getElementsByClassName('colGroup1');
    let colGroup2 = document.getElementsByClassName('colGroup2');
    let colGroup3 = document.getElementsByClassName('colGroup3');
    let avarageGroup_1 = document.getElementById('avarageGroup1');
    let avarageGroup_2 = document.getElementById('avarageGroup2');
    let avarageGroup_3 = document.getElementById('avarageGroup3');
    let rowGroup1 = document.getElementsByClassName('rowGroup1');
    let rowGroup2 = document.getElementsByClassName('rowGroup2');
    let rowGroup3 = document.getElementsByClassName('rowGroup3');
    let rowGroup4 = document.getElementsByClassName('rowGroup4');
    let sum1 = document.getElementById('sum1');
    let sum2 = document.getElementById('sum2');
    let sum3 = document.getElementById('sum3');
    let sum4 = document.getElementById('sum4');
    let rowGroup1_none = document.getElementsByClassName('rowGroup1_none');
    let rowGroup2_none = document.getElementsByClassName('rowGroup2_none');
    let rowGroup3_none = document.getElementsByClassName('rowGroup3_none');
    let rowGroup4_none = document.getElementsByClassName('rowGroup4_none');
    
    
    const rowGroup1Arr = Array.from(rowGroup1);
    const rowGroup2Arr = Array.from(rowGroup2);
    const rowGroup3Arr = Array.from(rowGroup3);
    const rowGroup4Arr = Array.from(rowGroup4);

    const colGroup1Arr = Array.from(colGroup1);
    const colGroup2Arr = Array.from(colGroup2);
    const colGroup3Arr = Array.from(colGroup3);
    function sum (arr) {
      return arr.reduce((acc, el) => {
        acc += Number(el.innerText)
        return acc
      }, 0)  
    }

    function avarage(arr) {
        return arr.reduce((acc, el) => {
            acc += Number(el.innerText/colGroup1Arr.length)
            
            return acc
        }, 0)
    }

    let avarage_colGroup1 = avarage(colGroup1Arr)
    avarageGroup_1.innerText = avarage_colGroup1;

    let avarage_colGroup2 = avarage(colGroup2Arr)
    avarageGroup_2.innerText = avarage_colGroup2;

    let avarage_colGroup3 = avarage(colGroup3Arr)
    avarageGroup_3.innerText = avarage_colGroup3;



    let sum_rowGroup1 = sum(rowGroup1Arr);
    sum1.innerText = sum_rowGroup1;

    let sum_rowGroup2 = sum(rowGroup2Arr);
    sum2.innerText = sum_rowGroup2;

    let sum_rowGroup3 = sum(rowGroup3Arr);
    sum3.innerText = sum_rowGroup3;

    let sum_rowGroup4 = sum(rowGroup4Arr);
    sum4.innerText = sum_rowGroup4;
    console.log(sum_rowGroup1);

    


    // наведение на среднии значения
    avarageGroup_1.onmouseover = function(){
        for (i = 0; i < colGroup1.length; i++){
            colGroup1[i].style.backgroundColor = '#c3e6cb'
        }
        
    }
    avarageGroup_1.onmouseout = function(){
        for (i = 0; i < colGroup1.length; i++){
            colGroup1[i].style.backgroundColor = ''
        }
    }

    avarageGroup_2.onmouseover = function(){
        for (i = 0; i < colGroup2.length; i++){
            colGroup2[i].style.backgroundColor = '#c3e6cb'
        }
        
    }
    avarageGroup_2.onmouseout = function(){
        for (i = 0; i < colGroup1.length; i++){
            colGroup2[i].style.backgroundColor = ''
        }
    }

    avarageGroup_3.onmouseover = function(){
        for (i = 0; i < colGroup1.length; i++){
            colGroup3[i].style.backgroundColor = '#c3e6cb'
        }
        
    }
    avarageGroup_3.onmouseout = function(){
        for (i = 0; i < colGroup1.length; i++){
            colGroup3[i].style.backgroundColor = ''
        }
    }

    // наведения на сумму
    sum1.onmouseover = function(){
        for (i = 0; i < rowGroup1.length; i++){
            rowGroup1[i].style.backgroundColor = '#c3e6cb'
            rowGroup1_none[i].style.display = 'block'
        }
        
    }
    sum1.onmouseout = function(){
        for (i = 0; i < rowGroup1.length; i++){
            rowGroup1[i].style.backgroundColor = ''
            rowGroup1_none[i].style.display = 'none'
        }
    }

    sum2.onmouseover = function(){
        for (i = 0; i < rowGroup2.length; i++){
            rowGroup2[i].style.backgroundColor = '#c3e6cb'
            rowGroup2_none[i].style.display = 'block'
        }
    }
    sum2.onmouseout = function(){
        for (i = 0; i < rowGroup2.length; i++){
            rowGroup2[i].style.backgroundColor = ''
            rowGroup2_none[i].style.display = 'none'
        }
    }

    sum3.onmouseover = function(){
        for (i = 0; i < rowGroup3.length; i++){
            rowGroup3[i].style.backgroundColor = '#c3e6cb'
            rowGroup3_none[i].style.display = 'block'
        }
    }
    sum3.onmouseout = function(){
        for (i = 0; i < rowGroup3.length; i++){
            rowGroup3[i].style.backgroundColor = ''
            rowGroup3_none[i].style.display = 'none'
        }
    }

    sum4.onmouseover = function(){
        for (i = 0; i < rowGroup4.length; i++){
            rowGroup4[i].style.backgroundColor = '#c3e6cb'
            rowGroup4_none[i].style.display = 'block'
        }
    }
    sum4.onmouseout = function(){
        for (i = 0; i < rowGroup4.length; i++){
            rowGroup4[i].style.backgroundColor = ''
            rowGroup4_none[i].style.display = 'none'
        }
    }

    for (i = 0; i < colGroup1.length; i++){
        colGroup1[i].addEventListener('click', function(){
            this.colGroup1[i].innerText + 1
        })
    }
</script>


</body>
</html>